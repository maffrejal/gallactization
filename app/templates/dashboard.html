{% extends "base.html" %}
{% block content %}
<div class="hud-card">
  <div class="dashboard-grid">
    <div class="profile-card">
      <h3>{{ user.username }}</h3>
      <p>Level {{ user.level }} â€” XP: {{ user.xp }}</p>
      <div style="margin:12px 0">
        <div class="stat-row"><div class="stat-name">STR</div><div class="stat-bar"><div class="stat-fill" style="width:20%"></div></div></div>
        <div class="stat-row"><div class="stat-name">INT</div><div class="stat-bar"><div class="stat-fill" style="width:20%"></div></div></div>
        <div class="stat-row"><div class="stat-name">LUK</div><div class="stat-bar"><div class="stat-fill" style="width:20%"></div></div></div>
        <div class="stat-row"><div class="stat-name">VIT</div><div class="stat-bar"><div class="stat-fill" style="width:20%"></div></div></div>
        <div class="stat-row"><div class="stat-name">DEF</div><div class="stat-bar"><div class="stat-fill" style="width:20%"></div></div></div>
      </div>
      <div class="currencies">
        <div class="currency">ğŸ’³ Credits: 500</div>
        <div class="currency">âš¡ Energy: 100</div>
        <div class="currency">ğŸ”¬ Research: 0</div>
        <div class="currency">ğŸ› Influence: 0</div>
      </div>
    </div>
    <div>
      <h2>Empire Overview</h2>
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:18px">
        <a class="btn-primary" href="{{ url_for('viewer.galaxy_map') }}">Galaxy Map</a>
        <a class="btn-primary" href="{{ url_for('dashboard.index') }}">My Colonies</a>
        <a class="btn-primary" href="{{ url_for('dashboard.index') }}">Buildings</a>
        <a class="btn-primary" href="{{ url_for('dashboard.index') }}">Research</a>
		<a href="/biomes" class="nav-link neon-link">ğŸŒ¿ Biomes & Lifeforms</a>
		<a class="btn-primary" href="#" onclick="startGame()">â–¶ Generate New Universe</a>
      </div>
		<h2>Your Universes</h2>

		{% if universes|length == 0 %}
			<p>No universes found. Click "Generate New Universe" to create one.</p>
		{% else %}
			<div class="universe-list">
				{% for u in universes %}
					<div class="universe-item">
						<h3>{{ u.name }}</h3>
						<p>Created: {{ u.created_at.strftime('%Y-%m-%d %H:%M') }}</p>

						<a class="btn-primary"
						   href="{{ url_for('savegame.list_for_universe', universe_id=u.id) }}">
						   Choose
						</a>
					</div>
				{% endfor %}
			</div>
		{% endif %}
      <h3>Recent Activity</h3>
      <div style="background:#021226;padding:12px;border-radius:8px;color:#cfe8ff">No activity yet.</div>
    </div>
  </div>
</div>
<script>
function startGame() {
    fetch("/game/generate-universe", { method: "POST" })
        .then(res => window.location.href = res.url);
}
</script>
{% endblock %}
